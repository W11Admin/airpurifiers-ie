{{#each product.reviews.messages}}
  {{#if error}}
    {{> components/common/alert/alert-error error}}
  {{/if}}
  {{#if success}}
    {{> components/common/alert/alert-success success}}
  {{/if}}
{{/each}}

<div class="productView-section">
  <div class="productView-image" data-slide-id="zoom">
    <a class="MagicZoom" id="zoom"
      href=" {{getImageSrcset product.main_image (cdn theme_settings.default_image_product) 1x=theme_settings.zoom_size}}"
      target="_blank" {{#if schema}} itemprop="image" {{/if}}>
      {{> components/common/responsive-img
          image=product.main_image
          fallback_size=theme_settings.product_size
          xlazyload=theme_settings.lazyload_mode
          default_image=theme_settings.default_image_product
          otherAttributes="data-main-image"
      }}
    </a>
    {{#gt product.images.length 1}}
      <ul class="MagicZoomSelectors productView-thumbnails">
        {{#each product.images}}
          <li class="productView-thumbnail">
            <a data-slide-id="zoom" title="{{alt}}" data-zoom-id="zoom"
              data-zoom-image="{{getImageSrcset this (cdn ../theme_settings.default_image_product) 1x=../theme_settings.zoom_size}}"
              data-image="{{getImageSrcset this (cdn ../theme_settings.default_image_product) 1x=../theme_settings.product_size}}">
              {{> components/common/responsive-img
                  image=this
                  fallback_size=../theme_settings.productview_thumb_size
                  lazyload=../theme_settings.lazyload_mode
              }}
            </a>
          </li>
        {{/each}}
      </ul>
    {{/gt}}
  </div>
  <section class="productView-details">
    <h1 class="productView-title" {{#if schema}}itemprop="name" {{/if}}>{{product.title}}</h1>
    {{product.detail_messages}}
    <form class="form" method="post" action="{{product.cart_url}}" enctype="multipart/form-data" data-cart-item-add>
      <input type="hidden" name="action" value="add">
      <input type="hidden" name="product_id" value="{{product.id}}" />
      {{#if product.num_reviews '>' 0}}
        <div class="productView-rating" {{#if product.num_reviews '>' 0}}{{#if schema}} itemprop="aggregateRating"
          itemscope itemtype="http://schema.org/AggregateRating" {{/if}}{{/if}}>
          {{#if settings.show_product_rating}}
            {{#if schema}}
              <meta itemprop="ratingValue" content="{{product.rating}}">
              <meta itemprop="ratingCount" content="{{product.num_reviews}}">
              <meta itemprop="reviewCount" content="{{product.num_reviews}}">
            {{/if}}
            {{> components/products/ratings rating=product.rating}}
            <span class="productView-reviewLink">
              <a href="{{product.url}}#product-reviews">
                {{lang 'products.reviews.link_to_review' total=product.num_reviews}}
              </a>
            </span>
          {{/if}}
        </div>
      {{/if}}
      {{#if product.price}}
        <div class="productView-price">
          {{#or customer (if theme_settings.restrict_to_login '!==' true)}}
            {{> components/products/price price=product.price schema_org=schema}}
      {{else}}
        {{> components/common/login-for-pricing}}
          {{/or}}
        </div>
      {{/if}}
      {{#if product.options}}
        <div class="productView-options" data-product-option-change>
          <div class="productOptions-list">
            {{#each product.options}}
              {{{dynamicComponent 'components/products/options'}}}
            {{/each}}
          </div>
        </div>
      {{/if}}
      {{{region name="product_below_price"}}}
      <div class="form-field form-field--stock{{#unless product.stock_level}} u-hiddenVisually{{/unless}}">
        <label class="form-label form-label--alternate">
          {{lang 'products.current_stock'}}
          <span data-product-stock>{{product.stock_level}}</span>
        </label>
      </div>
      {{#unless product.can_purchase}}
        <strong class="productView-stock">Out of Stock</strong>
      {{/unless}}
      {{#if product.availability}}
        <p class="productView-availability">{{product.availability}}</p>
      {{/if}}
      {{#if product.release_date }}
        <p class="productView-date">{{product.release_date}}</p>
      {{/if}}
      {{#if product.can_purchase}}
        {{> components/products/add-to-cart}}
      {{/if}}
    </form>
    {{#if settings.show_wishlist}}
      {{> components/common/wishlist-dropdown}}
    {{/if}}
  </section>
</div>
<div class="productView-sectionAlt">
  <a href="/delivery-information/" class="delivery-banner" target="_blank">
    <div class="delivery-banner-tablet">
      <img src="https://cdn11.bigcommerce.com/s-28n2ql08/content/Free-Delivery-Banner-Tablet.png"
        alt="Free Next Working Day Delivery to the UK" title="Free Next Working Day Delivery to the UK">
    </div>
    <div class="delivery-banner-mobile">
      <img src="https://cdn11.bigcommerce.com/s-28n2ql08/content/Free-Delivery-Banner-Mobile.png?1"
        alt="Free Next Working Day Delivery to the UK" title="Free Next Working Day Delivery to the UK">
    </div>
  </a>
  <section class="productView-description">
    <h2 class="productView-sectionTitle">Description</h2>
    {{{product.description}}}
  </section>
  <div class="productView-specification">
    <a href="/delivery-information/" class="delivery-banner" target="_blank">
      <div class="delivery-banner-desktop">
        <img src="https://cdn11.bigcommerce.com/s-28n2ql08/content/Free-Delivery-Banner-Desktop.png?1"
          alt="Free Next Working Day Delivery to the UK" title="Free Next Working Day Delivery to the UK">
      </div>
    </a>
    {{#if product.custom_fields}}
      <section class="productView-specificationSection">
        <h2 class="productView-sectionTitle">Specifications</h2>
        {{#if product.brand}}
          <dl>
            <dt>Brand:</dt>
            <dd>{{product.brand.name}}</dd>
          </dl>
        {{/if}}
        {{#each product.custom_fields}}
          {{# unless name "Contents"}}
            {{# unless name "Banner"}}
              <dl>
                <dt>{{name}}:</dt>
                <dd>{{{value}}}</dd>
              </dl>
              {{/unless}}
              {{/unless}}
        {{/each}}
      </section>
    {{/if}}
    {{#all product.width product.height product.depth theme_settings.show_product_dimensions}}
      <section class="productView-specificationSection">
        <h2 class="productView-sectionTitle">Dimensions</h2>
        <dl>
          <dt>{{lang 'products.depth'}}</dt>
          <dd data-product-depth>
            {{truncate product.depth 4}}
            {{#if settings.measurements.length '==' 'Centimeters'}}
              {{lang 'products.measurement.metric'}}
            {{else}}
              {{lang 'products.measurement.imperial'}}
            {{/if}}
          </dd>
        </dl>
        <dl>
          <dt>{{lang 'products.height'}}</dt>
          <dd data-product-height>
            {{truncate product.height 4}}
            {{#if settings.measurements.length '==' 'Centimeters'}}
              {{lang 'products.measurement.metric'}}
            {{else}}
              {{lang 'products.measurement.imperial'}}
            {{/if}}
          </dd>
        </dl>
        <dl>
          <dt>{{lang 'products.width'}}</dt>
          <dd data-product-width>
            {{truncate product.width 4}}
            {{#if settings.measurements.length '==' 'Centimeters'}}
              {{lang 'products.measurement.metric'}}
            {{else}}
              {{lang 'products.measurement.imperial'}}
            {{/if}}
          </dd>
        </dl>
      </section>
    {{/all}}
    {{#if product.custom_fields}}
      {{#each product.custom_fields}}
        {{#if name "Contents"}}
          {{#if @last}}
            <section class="productView-specificationSection lastSection">
              <h2 class="productView-sectionTitle">Box Contents</h2>
          {{/if}}
        {{/if}}
      {{/each}}
      {{#each product.custom_fields}}
        {{#if name "Contents"}}
          <span>{{{value}}}</span>
        {{/if}}
      {{/each}}
      {{#each product.custom_fields}}
        {{#if name "Contents"}}
          {{#if @last}}
            </section>
          {{/if}}
        {{/if}}
      {{/each}}
    {{/if}}
  </div>
</div>
<div class="productView-section">
  <section class="productView-review" id="product-reviews">
    <h2 class="productView-sectionTitle">Product Reviews</h2>
    {{> components/products/reviews reviews=product.reviews product=product urls=urls}}
  </section>
</div>
{{#if product.related_products}}
  <div class="productView-sectionAlt">
    <section class="productView-related">
      <h2 class="productView-sectionTitle">Related Products</h2>
      {{#if settings.data_tag_enabled}}
        {{> components/products/grid products=product.related_products list="Related Products"}}
      {{else}}
        {{> components/products/grid products=product.related_products}}
      {{/if}}
    </section>
  </div>
{{/if}}
<div id="previewModal" class="modal modal--large" data-reveal>
  <a href="#" class="modal-close" aria-label="{{lang 'common.close'}}" role="button">
    <span aria-hidden="true">&#215;</span>
  </a>
  <div class="modal-content"></div>
  <div class="loadingOverlay"></div>
</div>
<link href="/content/magiczoomplus/magiczoomplus.css" rel="stylesheet" type="text/css" media="screen" />
<script src="/content/magiczoomplus/magiczoomplus.js" type="text/javascript"></script>
<script src="/content/magiczoomplus/magiczoomplus.settings.js" type="text/javascript"></script>